<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="member">

<!-- 회원가입 -->
<!-- 	<insert id="insertMember" parameterType="hashmap" useGeneratedKeys="true" keyProperty="MEMBER_NUMBER">
			<selectKey keyProperty="MEMBER_NUMBER" resultType="integer" order="BEFORE">
                        SELECT MEMBER_NUMBER_SEQ.NEXTVAL FROM DUAL
            </selectKey>
	<![CDATA[
     INSERT 
                INTO MEMBER 
                (MEMBER_ID, MEMBER_NAME, MEMBER_NUMBER, MEMBER_EMAIL, MEMBER_ZIPCODE, 
                MEMBER_ADDRESS1, MEMBER_ADDRESS2, MEMBER_PHONE, MEMBER_PASSWORD, MEMBER_ADMIN, MEMBER_DATE,MEMBER_GRADE) 
                
                VALUES
                (#{MEMBER_ID}, #{MEMBER_NAME}, #{MEMBER_NUMBER}, #{MEMBER_EMAIL}, #{MEMBER_ZIPCODE}, 
                #{MEMBER_ADDRESS1}, #{MEMBER_ADDRESS2}, 
                #{MEMBER_PHONE}, #{MEMBER_PASSWORD}, 0, sysdate,0)
     ]]>
     </insert>
 -->	<insert id="insertMember" parameterType="hashmap" >
	<![CDATA[
     INSERT INTO MEMBER 
                (MEMBER_ID, MEMBER_NAME, MEMBER_NUMBER, MEMBER_EMAIL, MEMBER_ZIPCODE, 
                MEMBER_ADDRESS1, MEMBER_ADDRESS2, MEMBER_PHONE, MEMBER_PASSWORD, MEMBER_ADMIN, MEMBER_DATE,MEMBER_GRADE) 
                
                VALUES(#{MEMBER_ID}, #{MEMBER_NAME}, MEMBER_NUMBER_SEQ.NEXTVAL, #{MEMBER_EMAIL}, #{MEMBER_ZIPCODE}, 
                #{MEMBER_ADDRESS1}, #{MEMBER_ADDRESS2}, 
                #{MEMBER_PHONE}, #{MEMBER_PASSWORD}, 0, sysdate,0)
     ]]>
     </insert>
        
        
        <!-- 아이디 중복확인-->
	<select id="checkId" parameterType="String" resultType="int">
	<![CDATA[
		SELECT COUNT(*) FROM MEMBER WHERE MEMBER_ID = #{MEMBER_ID}
	]]>
	</select>
	
	<!-- 해당이메일 존재여부 확인 -->
	<select id="checkMember" parameterType="hashmap" resultType="java.lang.Integer">
	<![CDATA[
	select count(member_email) from member where member_email = #{MEMBER_EMAIL}
	]]>
	</select>
        

    </mapper>